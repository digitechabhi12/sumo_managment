<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:layout="sap.ui.layout"
  xmlns:viz="sap.viz.ui5.controls"
  xmlns:uxap="sap.uxap"
  controllerName="portal.controller.Emp"
  displayBlock="true">

  <App>
    <pages>
      <Page title="Employee Dashboard">
        <content>
          <VBox class="sapUiSmallMargin">

            <!-- TOP: EMPLOYEE INFO -->
            <HBox class="sapUiSmallMarginBottom" justifyContent="SpaceBetween">
              <VBox>
                <ObjectHeader
                  title="John Doe"
                  number="E12345"
                  numberUnit="Employee Code"
                  intro="Software Engineer"
                  icon="sap-icon://employee">
                  <attributes>
                    <ObjectAttribute text="Manager: Jane Smith"/>
                    <ObjectAttribute text="Department: IT"/>
                  </attributes>
                </ObjectHeader>
              </VBox>
            </HBox>

            <!-- MIDDLE SECTION -->
            <HBox renderType="Bare" justifyContent="SpaceBetween" class="sapUiSmallMarginBottom">

              <!-- LEFT 4x4: LEAVE INFO -->
              <VBox class="sapUiMediumMarginEnd" width="45%">
                <Panel headerText="Leave Summary" width="100%">
                  <viz:VizFrame id="leaveChart" height="250px" width="100%" vizType="pie">
                    <viz:dataset>
                      <viz.data:FlattenedDataset xmlns:viz.data="sap.viz.ui5.data"
                        data="{/leaveSummary}">
                        <viz.data:dimensions>
                          <viz.data:DimensionDefinition name="Type" value="{type}"/>
                        </viz.data:dimensions>
                        <viz.data:measures>
                          <viz.data:MeasureDefinition name="Count" value="{count}"/>
                        </viz.data:measures>
                      </viz.data:FlattenedDataset>
                    </viz:dataset>
                    <viz:feeds>
                      <viz.feeds:FeedItem xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
                        uid="size" type="Measure" values="Count"/>
                      <viz.feeds:FeedItem xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
                        uid="color" type="Dimension" values="Type"/>
                    </viz:feeds>
                  </viz:VizFrame>
                  <Button text="Manage Leaves" press=".onOpenLeaveFragment"/>
                </Panel>
              </VBox>

              <!-- RIGHT 4x4: PAYROLL INFO -->
              <VBox width="45%">
                <Panel headerText="Payroll Info" width="100%">
                  <List>
                    <items>
                      <StandardListItem title="Last Credit" description="85,000 INR (01-Aug-2025)"/>
                      <StandardListItem title="Bonus" description="5,000 INR"/>
                      <StandardListItem title="Deductions" description="2,000 INR"/>
                    </items>
                  </List>
                </Panel>
              </VBox>
            </HBox>

            <!-- NEXT ROW: PROJECTS + ALERTS -->
            <HBox renderType="Bare" justifyContent="SpaceBetween" class="sapUiSmallMarginBottom">

              <!-- LEFT: PROJECT INFO -->
              <VBox width="45%">
                <Panel headerText="Projects Tasks" width="100%">
                  <List>
                    <items>
                      <StandardListItem title="Project A" description="Module X - In Progress"/>
                      <StandardListItem title="Project B" description="Module Y - Completed"/>
                      <StandardListItem title="Project C" description="Module Z - Pending"/>
                    </items>
                  </List>
                </Panel>
              </VBox>

              <!-- RIGHT: ALERTS & MEETINGS -->
              <VBox width="45%">
                <Panel headerText="Alerts  Meetings" width="100%">
                  <List>
                    <items>
                      <StandardListItem title="Meeting" description="Project Kickoff - 02-Sep-2025"/>
                      <StandardListItem title="Alert" description="Timesheet pending"/>
                      <StandardListItem title="Alert" description="Policy update pending review"/>
                    </items>
                  </List>
                </Panel>
              </VBox>
            </HBox>

            <!-- BOTTOM: EVENTS TABLE -->
            <Panel headerText="Event Calendar" width="100%">
              <Table inset="false">
                <columns>
                  <Column><Text text="Date"/></Column>
                  <Column><Text text="Type"/></Column>
                  <Column><Text text="Description"/></Column>
                </columns>
                <items>
                  <ColumnListItem>
                    <Text text="2025-09-01"/>
                    <Text text="Holiday"/>
                    <Text text="Independence Day"/>
                  </ColumnListItem>
                  <ColumnListItem>
                    <Text text="2025-09-05"/>
                    <Text text="Meeting"/>
                    <Text text="Client Review Meeting"/>
                  </ColumnListItem>
                  <ColumnListItem>
                    <Text text="2025-09-10"/>
                    <Text text="Training"/>
                    <Text text="UI5 Best Practices"/>
                  </ColumnListItem>
                </items>
              </Table>
            </Panel>

          </VBox>
        </content>
      </Page>
    </pages>
  </App>
</mvc:View>
